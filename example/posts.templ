{% package main %}

{% import "fmt" %}
{% import "time" %}

{% templ headerTemplate(title string) %}
	<head><title>{%= title %}</title></head>
{% endtempl %}

{% templ footerTemplate() %}
	<footer data-testid="footerTemplate">
		<div>&copy; {%= fmt.Sprintf("%d", time.Now().Year()) %}</div>
	</footer>
{% endtempl %}

{% templ navTemplate() %}
	<nav data-testid="navTemplate">
		<ul>
			<li><a href="/">Home</a></li>
			<li><a href="/posts">Posts</a></li>
		</ul>
	</nav>
{% endtempl %}

{% templ layout(name string, content templ.Component) %}
	<html>
		{%! headerTemplate(name) %}
		<body>
			<h1>{%= name %}</h1>
			{%! navTemplate() %}
			<main>
				{%! content %}
			</main>
		</body>
		{%! footerTemplate() %}
	</html>
{% endtempl %}

{% templ homeTemplate() %}
	<div>Welcome to my website.</div>
{% endtempl %}

{% templ postsTemplate(posts []Post) %}
	{% for _, p := range posts %}
		<div data-testid="post">
			<div>{%= p.Name %}</div>
			<div>{%= p.Author %}</div>
		</div>
	{% endfor %}
{% endtempl %}

{% templ home() %}
	{%! layout("Home", homeTemplate()) %}
{% endtempl %}

{% templ posts(posts []Post) %}
	{%! layout("Posts", postsTemplate(posts)) %}
{% endtempl %}

